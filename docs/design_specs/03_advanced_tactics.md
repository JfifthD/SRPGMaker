# Advanced Tactics & Systems Specification

본 문서는 SRPG의 깊이를 더해주고 플레이어의 다채로운 전술적 선택을 유도하기 위한 **심화 전술 시스템** 명세서입니다. 본 문서의 기능들은 순차적으로 코어 전투 엔진에 결합될 예정입니다.

## 1. 전장 통제 및 기회 공격 (Zone of Control / ZOC)

탱커 클래스가 전선을 유지하고 딜러를 보호할 수 있도록 지상 유닛 간의 이동을 방해하는 시스템입니다.

- **ZOC 타일 판정:** 적군 유닛과 인접한 타일(상하좌우 제한 또는 8방향)은 ZOC 영역으로 취급됩니다.
- **이동력 페널티:** ZOC 영역에 진입하거나 이탈할 때 추가적인 AP가 소모되거나, ZOC 진입 시 강제로 이동이 멈추는 제약이 발생합니다.
- **기회 공격 (First Strike/Attack of Opportunity):** ZOC 영역을 뚫고 지나가려는 적대적 유닛에게, 턴에 관계없이 자동으로 1회의 평타를 가하는 리액션 기반의 공격이 발생합니다.

## 2. 리액션 및 비동기 스킬 (Reaction Skills)

자신의 턴이 아닐 때 적의 행동에 반응하여 발동하는 패시브/오토 스킬 시스템입니다.

- **반격 (Counter):** 적의 명중된 공격 직후, 자신의 무기 사거리 내에 적이 있다면 대미지를 입히는 반격을 가합니다.
- **회피 및 방어 (Evade / Block):** 적의 공격 시도를 자체적인 스탯 확률이나 버프 스택으로 무효화하거나 대미지를 경감시킵니다.
- **불굴 및 사망 유예 (Survive / Undying):** 치명적인 타격을 받아 HP가 0이 될 상황에서 1회 한정으로 HP 1을 남기고 버티는 특성입니다.

## 3. 진형 및 협동 공격 (Assist / Chain-attack)

아군끼리 서로 인접해 있을 때 시너지를 발휘하는 연계 타격 시스템입니다.

- **연계 공격 (Chain Attack):** 발동자가 적을 공격할 때, 그 적이 다른 아군의 사거리(또는 특정 연계 범위) 내에 위치한다면 해당 통상 공격 직후 아군이 이어서 추가 타격을 가합니다.
- 발동 확률이나 위력은 아군 간의 친밀도(Affinity) 또는 포지셔닝에 따라 스케일링 될 수 있습니다.

## 4. 다변화된 승리/패배 조건 (Diverse Win/Loss Conditions)

단순한 "적 전멸"을 넘어서 맵 기믹과 스토리 텔링을 반영하는 목표 시스템입니다. 기존 `VictoryCondition` 스키마를 확장합니다.

- `survive_turns`: N턴 동안 방어선 구축 및 생존.
- `escort_npc`: 특정 AI NPC 유닛이 목표 지점(Target Pos)에 도달할 때까지 호위.
- `assassinate`: 수많은 적들 중 타겟이 되는 적 지휘관 1명만 처치 시 즉시 승리.
- `escape`: 맵의 특정 타일에 아군 일정 수 이상 도달 시 승리.

## 5. 지형 상호작용 (Interactive Environment)

타일 속성이 정적이지 않고, 전투 중 유저나 AI의 마법/스킬 피드백에 의해 동적으로 변화하는 맵 타일 메커니즘입니다.

- **지오 효과 (Geo Effects):** 화염 마법 타격 시 숲 타일이 불타올라 밟는 유닛에게 화상 도트를 부여하거나, 수면 타일에 빙결 마법으로 얼음 지면을 만들어 이동 코스트를 변환합니다.
- **오브젝트 파괴:** 문루, 바리케이드, 다리 스위치 등 물리적으로 파괴 및 상호작용이 가능한 특수 타일 엔티티.

## 6. 전직 및 클래스 트리 (Job / Class System)

단순 선형 성장을 넘어 유저가 유닛의 역할을 직접 조합하는 직업 시스템입니다.

- **클래스 트리 분기:** 기초 클래스(승려, 전사)에서 특정 레벨과 재화 도달 시 세부 클래스(팔라딘, 워메이지 등)로 파생됩니다.
- **스킬 승계 (Multi-classing):** 이전 클래스에서 배운 특정 패시브나 액티브 스킬을 슬롯(Slot) 단위로 장착하여 새로운 클래스에 가져갈 수 있습니다.

## 7. 장비 트윅 시스템 (Equipment & Gizmos)

스탯 상승 외 유틸리티성 체스말 조작 능력을 부여하는 장착 아이템입니다.

- 액세서리를 통해 `이동력(Move) +1`, `점프(Elevation Range) +2`, `불 속성 지면 무효화` 등의 특수 기믹 파훼 속성을 부여하여 고착화된 맵 공략법을 다양화시킵니다.

## 8. 위험 구역 시각화 (Danger Zone Toggle)

유저의 수싸움과 전술적 판단을 돕기 위한 렌더링 헬퍼입니다.

- 단축키(예: `Alt` 또는 `Z`키) 클릭 시, 맵에 생존한 모든 적 유닛들의 [이동 한계치 + 공격 범위]가 합산된 붉은색 히트맵 레이어를 바닥에 오버레이합니다.
- 안전 구역(Safe Zone) 경계선을 시각적으로 그려주어 비숙련자의 진입 장벽을 낮춥니다.
